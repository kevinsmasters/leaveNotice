/*
 * LeaveNotice - plug in to notify users of leaving your site
 * Examples and documentation at: http://rewdy.com/tools/leavenotice-jquery-plugin
 * Version: 1.1.4 (01/30/2020)
 * Copyright (c) 2012 Andrew Meyer
 * Licensed under the MIT License: http://en.wikipedia.org/wiki/MIT_License
 * Requires: jQuery v1.4+
*/

!function(e){function n(n,t){n.timeOut>0&&clearTimeout(t),e("#"+n.overlayId+", #"+n.messageHolderId).fadeOut("fast",function(){e("#"+n.overlayId+", #"+n.messageHolderId).remove()}),e(document).unbind("keyup")}e.fn.leaveNotice=function(t){var i={siteName:window.location.href,exitMessage:"<p><strong>You have requested a website outside of {SITENAME}.</strong></p><p>Thank you for visiting.</p>",preLinkMessage:"<div class='setoff'><p>You will now be directed to:<br/>{URL}</p></div>",linkString:"",newWindow:!1,timeOut:4e3,overlayId:"ln-blackout",messageBoxId:"ln-messageBox",messageHolderId:"ln-messageHolder",linkId:"ln-link",displayUrlLength:50,overlayAlpha:.3},a=e.extend(i,t);return this.each(function(){el=e(this);var t=el.attr("href"),i=a.displayUrlLength;if(t.length>=i)var l="...";else l="";var o=t.substr(0,i)+l,s=el.attr("title");if(void 0===s||""==s)var d=o;else d=s;a.timeOut=a.newWindow?0:a.timeOut,el.click(function(){return e("body").append('<div id="'+a.overlayId+'"></div>'),e("body").append('<div id="'+a.messageHolderId+'"><div id="'+a.messageBoxId+'"></div></div>'),!1!==a.overlayAlpha&&e("#"+a.overlayId).css("opacity",a.overlayAlpha),preFilteredContent=a.exitMessage+a.preLinkMessage,msgContent=preFilteredContent.replace(/\{URL\}/g,'<a id="'+a.linkId+'" href="'+t+'" title="'+t+'"'+a.linkString+">"+d+"</a>"),msgContent=msgContent.replace(/\{SITENAME\}/g,a.siteName),a.timeOut>0?msgContent+='<p id="ln-cancelMessage"><a href="#close" id="ln-cancelLink">Cancel</a> or press the ESC key.</p>':msgContent+='<p id="ln-cancelMessage">Click the link above to continue or <a href="#close" id="ln-cancelLink">Cancel</a></p>',e("#"+a.messageBoxId).append(msgContent),a.timeOut>0?leaveIn=setTimeout(function(){e("#ln-cancelMessage").html("<em>Loading...</em>"),window.location.href=t},a.timeOut):leaveIn=!1,a.newWindow&&e("a#"+a.linkId).attr("target","_blank").click(function(){n(a,leaveIn)}),e("#ln-cancelLink").click(function(){return n(a,leaveIn),!1}),e(document).bind("keyup",function(e){27==e.which&&n(a,leaveIn)}),e(window).on("unload",function(e){n(a,leaveIn)}),!1})})}}(jQuery);
